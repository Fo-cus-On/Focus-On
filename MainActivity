package com.czorange.focus_on;

import android.content.Intent;
import android.database.sqlite.SQLiteDatabase;
import android.os.Bundle;
import android.support.v7.app.AppCompatActivity;
import android.view.View;
import android.widget.Button;
import android.widget.TabHost;

public class MainActivity extends AppCompatActivity {

	Db db1 =new Db();

	@Override
	protected void onCreate(Bundle savedInstanceState) {
		super.onCreate(savedInstanceState);
		setContentView(R.layout.activity_main);

		//创建或打开数据库
		try{
			SQLiteDatabase db = SQLiteDatabase.openOrCreateDatabase("/data/data/com.czorange.focus_on/db.db",null);
			db1.createtable();
		}catch (Exception e) {
			e.getMessage();}


		//tab各页面命名
		tabHosts.addTab(tabHosts.newTabSpec("tabPolitics").setIndicator("政治").setContent(R.id.tab1));
		tabHosts.addTab(tabHosts.newTabSpec("tabLivelihood").setIndicator("民生").setContent(R.id.tab2));
		tabHosts.addTab(tabHosts.newTabSpec("tabEs").setIndicator("文体").setContent(R.id.tab3));
		tabHosts.addTab(tabHosts.newTabSpec("tabLearning").setIndicator("学习").setContent(R.id.tab4));


		//貌似是叫初始化，忘了=。=
		Button search = (Button) findViewById(R.id.btn_search);
		Button Messages = (Button) findViewById(R.id.btn_Messages);
		Button Me = (Button) findViewById(R.id.btn_me);
		tabHosts = (TabHost) findViewById(R.id.tabHost);
		tabHosts.setup();

		//添加监听器
		search.setOnClickListener(new View.OnClickListener() {
			@Override
			public void onClick(View v) {
				Intent intent = new Intent(MainActivity.this,searchActivity.class);  //页面跳转（本类.this,要跳转的类.class）
				startActivity(intent);
			}
		});

		Messages.setOnClickListener(new View.OnClickListener() {
			@Override
			public void onClick(View v) {
				if (App.isLogin) {
					Intent intent = new Intent(MainActivity.this, MessageActivity.class);
					startActivity(intent);
					MainActivity.this.finish();//结束本类
				}
				else{
					Intent intent = new Intent(MainActivity.this, unloginActivity.class);
					startActivity(intent);
				}
			}
		});

		Me.setOnClickListener(new View.OnClickListener() {
			@Override
			public void onClick(View v) {
				if (App.isLogin) {
					Intent intent = new Intent(MainActivity.this, MeActivity.class);
					startActivity(intent);
					MainActivity.this.finish();
				}
				else{
					Intent intent = new Intent(MainActivity.this, unloginActivity.class);
					startActivity(intent);
				}
			}
		});
	}

	private TabHost tabHosts; //也是初始化
}
